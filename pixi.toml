[workspace]
name = "python-deadlines"
version = "0.1.0"
description = "Python deadlines is a Python package to parse and manage deadlines from various sources."
authors = ["Jesper Dramsch <jesper@dramsch.net>"]
channels = ["conda-forge"]
platforms = ["win-64", "osx-arm64", "linux-64"]

[tasks]
sort = 'python ./utils/sort_yaml.py --skip_links'
links = 'python ./utils/sort_yaml.py'
merge = 'python ./utils/main.py'
serve = "bundler exec jekyll serve"
serve-dev = "bundler exec jekyll serve --config _config.yml,_config.dev.yml"
serve-fast = "bundler exec jekyll serve --config _config.yml,_config.dev.yml --incremental --skip-initial-build"
serve-minimal = "bundler exec jekyll serve --config _config.yml,_config.minimal.yml --incremental"
build-dev = "bundler exec jekyll build --config _config.yml,_config.dev.yml"
build-minimal = "bundler exec jekyll build --config _config.yml,_config.minimal.yml"
profile = "bundler exec jekyll build --profile"
next = "python ./utils/newsletter.py"
git = "python utils/git_parser.py"
newsletter = { depends-on = ["git", "next"] }
setup-hooks = "pre-commit install"
test = "pytest tests/ -v"
test-cov = "pytest tests/ -v --cov=utils --cov-report=term-missing"
test-fast = "pytest tests/ -v -x"
pre = "pre-commit run --all-files"

[dependencies]
python = ">=3.10,<3.12"
thefuzz = ">=0.22.1,<0.23"
pandas = ">=2.2.2,<2.3"
iso3166 = ">=2.1.1,<2.2"
icalendar = ">=5.0.12,<5.1"
yaml = ">=0.2.5,<0.3"
pyyaml = ">=6.0.1,<6.1"
tqdm = ">=4.66.2,<4.67"
requests = ">=2.31.0,<2.32"
pre-commit = ">=3.1.1,<3.8"
pydantic = ">=2.12.2,<3"

[feature.all-contrib.dependencies]
nodejs = "*"

[feature.tests.dependencies]
nodejs = "*"
pytest = ">=7.4.0,<8.0"
pytest-cov = ">=4.1.0,<5.0"
pytest-mock = ">=3.11.0,<4.0"


[feature.all-contrib.tasks]
install = "npm install -g all-contributors-cli"
check = "all-contributors check"
add = "all-contributors add"

[feature.tests.tasks]
test = "pytest tests/ -v; npm test"

[environments]
all-contrib = ["all-contrib"]
tests = ["tests"]

[pypi-dependencies]
vladiate = ">=0.0.26, <0.0.27"
