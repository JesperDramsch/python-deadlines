---
layout: search
namespace: search
permalink: /search/
permalink_es: /buscar/
permalink_de: /suche/
permalink_fr: /recherche/
permalink_pt-br: /buscar/
permalink_zh-cn: /搜索/
permalink_ru: /поиск/
permalink_id: /pencarian/
permalink_hi: /खोजें/
title: titles.search
---

<div id="search-results" role="region" aria-live="polite" aria-label="Search Results"></div>

<script src="/static/js/search.js"></script>
<script>
	(function () {
		// Initialize conference types from Jekyll data
		if (typeof initializeConferenceTypes === 'function') {
			const types = [
				{% for type in site.data.types %}
				{ name: "{{ type.name }}", sub: "{{ type.sub }}", color: "{{ type.color }}" }{% unless forloop.last %},{% endunless %}
				{% endfor %}
			];
			initializeConferenceTypes(types);
		}

		// Set translation strings
		if (typeof setSearchTranslations === 'function') {
			setSearchTranslations({
				noResults: '{% t search.no-results %}',
				error: '{% t search.error %}',
				loading: 'Loading...',
				clickToFilter: 'Click to filter by'
			});
		}
		function displaySearchResults(results, docs) {
			var searchResults = document.getElementById('search-results');

			if (results.length) {
				searchResults.innerHTML = '';

				for (var i = 0; i < results.length; i++) {
					var item = docs[results[i].ref];

					var confDiv = document.createElement('div');
				confDiv.id = results[i].ref;
				confDiv.className = 'ConfItem ' + item.subs.split(',').map(function(sub) { return sub.trim() + '-conf'; }).join(' ');

				var titleRow = document.createElement('div');
				titleRow.className = 'row conf-row';
				var titleCol = document.createElement('div');
				titleCol.className = 'col-6';

				var titleSpan = document.createElement('span');
				titleSpan.className = 'conf-title';
				var titleLink = document.createElement('a');
				titleLink.title = 'Deadline Details';
				titleLink.href = item.url;
				titleLink.textContent = item.title;
				titleSpan.appendChild(titleLink);
				titleCol.appendChild(titleSpan);

				var titleSmall = document.createElement('span');
				titleSmall.className = 'conf-title-small';
				var titleSmallLink = document.createElement('a');
				titleSmallLink.title = 'Deadline Details';
				titleSmallLink.href = item.url;
				titleSmallLink.textContent = item.title;
				titleSmall.appendChild(titleSmallLink);
				titleCol.appendChild(titleSmall);

				if (item.link) {
					var iconSpan = document.createElement('span');
					iconSpan.className = 'conf-title-icon';
					var iconLink = document.createElement('a');
					iconLink.title = 'Conference Website';
					iconLink.href = item.link;
					iconLink.target = '_blank';
					iconLink.rel = 'noopener noreferrer';
					var iconImg = document.createElement('img');
					iconImg.src = '/static/img/203-earth.svg';
					iconImg.className = 'badge-link';
					iconImg.alt = 'Link to Conference Website';
					iconImg.width = 16;
					iconImg.height = 16;
					iconLink.appendChild(iconImg);
					iconSpan.appendChild(iconLink);
					titleCol.appendChild(iconSpan);
				}
				titleRow.appendChild(titleCol);
				confDiv.appendChild(titleRow);

				var metaRow = document.createElement('div');
				metaRow.className = 'row';
				var metaCol = document.createElement('div');
				metaCol.className = 'col-12 col-sm-6';
				var metaDiv = document.createElement('div');
				metaDiv.className = 'meta';
				var placeSpan = document.createElement('span');
				placeSpan.className = 'conf-place';
				var contentText = item.content.length > 150 ? item.content.substring(0, 150) + '... ' : item.content + ', ';
				placeSpan.appendChild(document.createTextNode(contentText));
				var placeLink = document.createElement('a');
				if (item.place === 'Online') {
					placeLink.href = '#';
				} else {
					placeLink.href = 'https://maps.google.com/?q=' + encodeURIComponent(item.place);
					placeLink.target = '_blank';
					placeLink.rel = 'noopener noreferrer';
				}
				placeLink.textContent = item.place;
				placeSpan.appendChild(placeLink);
				metaDiv.appendChild(placeSpan);
				metaCol.appendChild(metaDiv);
				metaRow.appendChild(metaCol);

				var deadlineCol = document.createElement('div');
				deadlineCol.className = 'col-12 col-sm-6';
				var deadlineDiv = document.createElement('div');
				deadlineDiv.className = 'deadline';
				var deadlineInner = document.createElement('div');
				var deadlineSpan = document.createElement('span');
				deadlineSpan.className = 'deadline-time';
				deadlineSpan.textContent = item.date;
				deadlineInner.appendChild(deadlineSpan);
				deadlineDiv.appendChild(deadlineInner);
				deadlineCol.appendChild(deadlineDiv);
				metaRow.appendChild(deadlineCol);
				confDiv.appendChild(metaRow);

				var subsRow = document.createElement('div');
				subsRow.className = 'row';
				var subsCol = document.createElement('div');
				subsCol.className = 'col-6';
				item.subs.split(',').forEach(function(sub) {
					var badge = document.createElement('span');
					badge.title = 'Click to only show ' + sub.trim() + ' conferences';
					badge.dataset.sub = sub.trim();
					badge.className = 'badge badge-light conf-sub ' + sub.trim() + '-tag';
					subsCol.appendChild(badge);
				});
				subsRow.appendChild(subsCol);
				var calCol = document.createElement('div');
				calCol.className = 'col-6';
				var calDiv = document.createElement('div');
				calDiv.className = 'calendar';
				calCol.appendChild(calDiv);
				subsRow.appendChild(calCol);
				confDiv.appendChild(subsRow);
				confDiv.appendChild(document.createElement('hr'));

				searchResults.appendChild(confDiv);
				}

			} else {
				var noResults = document.createElement('p');
				noResults.textContent = '{% t search.no-results %}';
				searchResults.innerHTML = '';
				searchResults.appendChild(noResults);
			}
		}

		function getQueryVariable(variable) {
			var query = window.location.search.substring(1);
			var vars = query.split('&');

			for (var i = 0; i < vars.length; i++) {
				var pair = vars[i].split('=');

				if (pair[0] === variable) {
					return decodeURIComponent(pair[1].replace(/\+/g, '%20'));
				}
			}
		}

		// Load the pre-built index
		fetch('{{ site.baseurl }}/assets/search/search_index.json')
			.then((response) => response.json())
			.then((data) => {
				const idx = lunr.Index.load(data.index);
				const docs = data.docs;

				var searchTerm = getQueryVariable('query');

				if (searchTerm) {
					document.getElementById('search-box').setAttribute('value', searchTerm);

					// Perform the search with the same ranking strategy as before
					var results = idx.search(searchTerm + '^30 ' + searchTerm + '~1 *' + searchTerm + '*');
					displaySearchResults(results, docs);
				}
			})
			.catch((error) => {
				console.error('Error loading search index:', error);
				var errorEl = document.createElement('p');
				errorEl.textContent = '{% t search.error %}';
				var sr = document.getElementById('search-results');
				sr.innerHTML = '';
				sr.appendChild(errorEl);
			});
	})();
</script>

<script src="/static/js/lunr.min.js"></script>
