<!DOCTYPE html>
<html>
<head>
    <title>Badge Click Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .conf-sub {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px;
            background: #007bff;
            color: white;
            border-radius: 3px;
            cursor: pointer;
        }
        .conf-sub:hover {
            opacity: 0.8;
        }
        #log {
            margin-top: 20px;
            padding: 10px;
            background: #f0f0f0;
            border: 1px solid #ccc;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Testing Badge Click Handlers</h1>
    
    <div>
        <span class="conf-sub" data-sub="DATA">DATA</span>
        <span class="conf-sub" data-sub="PY">PY</span>
        <span class="conf-sub" data-sub="WEB">WEB</span>
    </div>
    
    <div id="log">Click log will appear here...</div>
    
    <script>
        // Load conference-filter.js
        var script = document.createElement('script');
        script.src = '/static/js/conference-filter.js';
        document.head.appendChild(script);
        
        script.onload = function() {
            // Add logging
            var log = document.getElementById('log');
            
            // Check if handlers are attached
            $(document).on('click', '.conf-sub', function(e) {
                var sub = $(this).data('sub');
                log.textContent += 'Document handler triggered for: ' + sub + '\n';
                log.textContent += 'filterBySub exists: ' + (typeof window.filterBySub === 'function') + '\n';
                log.textContent += 'ConferenceFilter.filterBySub exists: ' + (window.ConferenceFilter && typeof window.ConferenceFilter.filterBySub === 'function') + '\n\n';
            });
            
            // Direct test
            setTimeout(function() {
                log.textContent += 'Page loaded. Testing direct calls:\n';
                log.textContent += 'window.filterBySub exists: ' + (typeof window.filterBySub === 'function') + '\n';
                log.textContent += 'window.ConferenceFilter exists: ' + (typeof window.ConferenceFilter === 'object') + '\n\n';
                log.textContent += 'Now click on the badges above to test...\n\n';
            }, 500);
        };
    </script>
</body>
</html>